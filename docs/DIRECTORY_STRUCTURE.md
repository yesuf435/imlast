# IMç³»ç»Ÿç›®å½•ç»“æ„è§„èŒƒ

## ğŸ“ é¡¹ç›®æ ¹ç›®å½•ç»“æ„

```
im-last/
â”œâ”€â”€ ğŸ“„ .env                          # ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ .gitignore                    # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ docker-compose.yml            # Docker Composeä¸»é…ç½®
â”œâ”€â”€ ğŸ“„ package.json                  # Node.jsä¾èµ–é…ç½®
â”œâ”€â”€ ğŸ“„ package-lock.json             # ä¾èµ–é”å®šæ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“ backend/                      # åç«¯æœåŠ¡ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile               # åç«¯Dockeré…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ package.json             # åç«¯ä¾èµ–
â”‚   â”œâ”€â”€ ğŸ“„ server.js                # ä¸»æœåŠ¡æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ models/                  # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ User.js                 # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Message.js              # æ¶ˆæ¯æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Group.js                # ç¾¤ç»„æ¨¡å‹
â”‚   â”‚   â””â”€â”€ FriendRequest.js        # å¥½å‹è¯·æ±‚æ¨¡å‹
â”‚   â””â”€â”€ ğŸ“ uploads/                 # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”‚
â”œâ”€â”€ ğŸ“ frontend/                     # å‰ç«¯åº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile               # å‰ç«¯Dockeré…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ nginx.conf               # Nginxé…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ package.json             # å‰ç«¯ä¾èµ–
â”‚   â”œâ”€â”€ ğŸ“„ vite.config.js           # Viteæ„å»ºé…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ tailwind.config.js       # Tailwind CSSé…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ index.html               # HTMLå…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“ src/                     # æºä»£ç ç›®å½•
â”‚       â”œâ”€â”€ ğŸ“„ App.jsx              # ä¸»åº”ç”¨ç»„ä»¶
â”‚       â”œâ”€â”€ ğŸ“„ main.jsx             # å…¥å£æ–‡ä»¶
â”‚       â”œâ”€â”€ ğŸ“ pages/               # é¡µé¢ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ Login.jsx           # ç™»å½•é¡µé¢
â”‚       â”‚   â”œâ”€â”€ Register.jsx        # æ³¨å†Œé¡µé¢
â”‚       â”‚   â”œâ”€â”€ ChatList.jsx        # èŠå¤©åˆ—è¡¨
â”‚       â”‚   â”œâ”€â”€ ChatWindow.jsx      # èŠå¤©çª—å£
â”‚       â”‚   â”œâ”€â”€ ContactsPage.jsx    # è”ç³»äººé¡µé¢
â”‚       â”‚   â””â”€â”€ ConversationsPage.jsx # ä¼šè¯é¡µé¢
â”‚       â”œâ”€â”€ ğŸ“ context/             # React Context
â”‚       â”‚   â””â”€â”€ AuthContext.jsx     # è®¤è¯ä¸Šä¸‹æ–‡
â”‚       â””â”€â”€ ğŸ“ components/          # å…¬å…±ç»„ä»¶
â”‚
â”œâ”€â”€ ğŸ“ docs/                        # ğŸ“š æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ README_IM.md                # ç³»ç»Ÿè¯´æ˜æ–‡æ¡£
â”‚   â”œâ”€â”€ README_PRODUCTION.md        # ç”Ÿäº§ç¯å¢ƒæ–‡æ¡£
â”‚   â”œâ”€â”€ DELIVERY_PACKAGE.md         # äº¤ä»˜è¯´æ˜
â”‚   â”œâ”€â”€ DEPLOYMENT_REPORT.md        # éƒ¨ç½²æŠ¥å‘Š
â”‚   â””â”€â”€ IMPORT_FORMAT.md            # å¯¼å…¥æ ¼å¼è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ“ scripts/                     # ğŸ› ï¸ è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ start.sh                    # å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ deploy.sh                   # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ check_connectivity.sh       # è¿é€šæ€§æ£€æŸ¥
â”‚   â”œâ”€â”€ db_manager.sh               # æ•°æ®åº“ç®¡ç†
â”‚   â”œâ”€â”€ import_chat_records.sh      # èŠå¤©è®°å½•å¯¼å…¥
â”‚   â”œâ”€â”€ test_features.sh            # åŠŸèƒ½æµ‹è¯•
â”‚   â””â”€â”€ import_data.js              # æ•°æ®å¯¼å…¥è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“ config/                      # âš™ï¸ é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ env.example                 # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â”œâ”€â”€ env.production              # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ ecosystem.config.js         # PM2é…ç½®
â”‚   â”œâ”€â”€ nginx.production.conf       # ç”Ÿäº§Nginxé…ç½®
â”‚   â””â”€â”€ docker-compose.backup.yml   # Dockeré…ç½®å¤‡ä»½
â”‚
â”œâ”€â”€ ğŸ“ samples/                     # ğŸ“„ ç¤ºä¾‹æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ sample_chat_records.json    # JSONæ ¼å¼ç¤ºä¾‹
â”‚   â”œâ”€â”€ sample_chat_records.csv     # CSVæ ¼å¼ç¤ºä¾‹
â”‚   â””â”€â”€ sample_wechat_export.txt    # å¾®ä¿¡æ ¼å¼ç¤ºä¾‹
â”‚
â”œâ”€â”€ ğŸ“ backup/                      # ğŸ’¾ å¤‡ä»½æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ app_production.js           # ç”Ÿäº§ç‰ˆæœ¬å¤‡ä»½
â”‚   â”œâ”€â”€ frontend_eCrrk.tar.gz       # å‰ç«¯å¤‡ä»½åŒ…
â”‚   â”œâ”€â”€ im-system-production.tar.gz # ç³»ç»Ÿå¤‡ä»½åŒ…
â”‚   â””â”€â”€ frontend_server.js          # å‰ç«¯æœåŠ¡å™¨å¤‡ä»½
â”‚
â”œâ”€â”€ ğŸ“ data/                        # ğŸ—„ï¸ æ•°æ®ç›®å½•
â”‚   â””â”€â”€ mongo/                      # MongoDBæ•°æ®ç›®å½•
â”‚
â”œâ”€â”€ ğŸ“ init/                        # ğŸš€ åˆå§‹åŒ–ç›®å½•
â”‚   â””â”€â”€ init_data.json              # åˆå§‹åŒ–æ•°æ®
â”‚
â”œâ”€â”€ ğŸ“ uploads/                     # ğŸ“ ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ (ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶)
â”‚
â”œâ”€â”€ ğŸ“ logs/                        # ğŸ“ æ—¥å¿—ç›®å½•
â”‚   â””â”€â”€ (ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶)
â”‚
â””â”€â”€ ğŸ“ node_modules/                # ğŸ“¦ Node.jsä¾èµ–åŒ…
```

## ğŸ¯ ç›®å½•ç”¨é€”è¯´æ˜

### æ ¸å¿ƒåº”ç”¨ç›®å½•
- **`backend/`** - åç«¯Node.jsæœåŠ¡ï¼ŒåŒ…å«APIã€æ•°æ®æ¨¡å‹ã€æ–‡ä»¶ä¸Šä¼ 
- **`frontend/`** - å‰ç«¯Reactåº”ç”¨ï¼ŒåŒ…å«æ‰€æœ‰é¡µé¢å’Œç»„ä»¶
- **`data/`** - æ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨ç›®å½•
- **`uploads/`** - ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶å­˜å‚¨

### ç®¡ç†å’Œç»´æŠ¤ç›®å½•
- **`docs/`** - æ‰€æœ‰é¡¹ç›®æ–‡æ¡£ï¼ŒåŒ…æ‹¬ä½¿ç”¨è¯´æ˜ã€éƒ¨ç½²æŒ‡å—
- **`scripts/`** - è¿ç»´è„šæœ¬ï¼ŒåŒ…æ‹¬å¯åŠ¨ã€éƒ¨ç½²ã€æµ‹è¯•ã€ç®¡ç†å·¥å…·
- **`config/`** - é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç¯å¢ƒé…ç½®ã€æœåŠ¡é…ç½®
- **`backup/`** - å¤‡ä»½æ–‡ä»¶å’Œå†å²ç‰ˆæœ¬
- **`samples/`** - ç¤ºä¾‹æ•°æ®å’Œæ¨¡æ¿æ–‡ä»¶
- **`logs/`** - ç³»ç»Ÿè¿è¡Œæ—¥å¿—
- **`init/`** - åˆå§‹åŒ–æ•°æ®å’Œè„šæœ¬

## ğŸ“‹ æ–‡ä»¶å‘½åè§„èŒƒ

### é…ç½®æ–‡ä»¶
- `*.config.js` - JavaScripté…ç½®æ–‡ä»¶
- `*.conf` - Nginxç­‰æœåŠ¡é…ç½®
- `env.*` - ç¯å¢ƒå˜é‡æ–‡ä»¶
- `docker-compose*.yml` - Dockeré…ç½®

### è„šæœ¬æ–‡ä»¶
- `*.sh` - Shellè„šæœ¬ (å¯æ‰§è¡Œ)
- `*.js` - Node.jsè„šæœ¬

### æ–‡æ¡£æ–‡ä»¶
- `README*.md` - è¯´æ˜æ–‡æ¡£
- `*.md` - Markdownæ–‡æ¡£

### å¤‡ä»½æ–‡ä»¶
- `*.backup.*` - å¤‡ä»½æ–‡ä»¶
- `*.tar.gz` - å‹ç¼©åŒ…
- `*å‰¯æœ¬*` - ä¸­æ–‡å¤‡ä»½æ ‡è¯†

## ğŸš€ å¿«é€Ÿè®¿é—®

### å¸¸ç”¨è„šæœ¬
```bash
# å¯åŠ¨ç³»ç»Ÿ
./scripts/start.sh

# æ£€æŸ¥è¿é€šæ€§
./scripts/check_connectivity.sh

# ç®¡ç†æ•°æ®åº“
./scripts/db_manager.sh status

# å¯¼å…¥èŠå¤©è®°å½•
./scripts/import_chat_records.sh -h
```

### å¸¸ç”¨æ–‡æ¡£
```bash
# æŸ¥çœ‹ç³»ç»Ÿè¯´æ˜
cat docs/README_IM.md

# æŸ¥çœ‹éƒ¨ç½²æŠ¥å‘Š
cat docs/DEPLOYMENT_REPORT.md

# æŸ¥çœ‹å¯¼å…¥æ ¼å¼
cat docs/IMPORT_FORMAT.md
```

### é…ç½®æ–‡ä»¶
```bash
# ç¯å¢ƒé…ç½®
cp config/env.example .env

# ç”Ÿäº§ç¯å¢ƒé…ç½®
cp config/env.production .env
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦ç›´æ¥ç¼–è¾‘ `node_modules/`** - è¿™æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ä¾èµ–ç›®å½•
2. **å¤‡ä»½é‡è¦æ•°æ®** - `data/` å’Œ `uploads/` ç›®å½•åŒ…å«é‡è¦æ•°æ®
3. **ä¿æŒç›®å½•ç»“æ„** - ç§»åŠ¨æ–‡ä»¶æ—¶æ³¨æ„æ›´æ–°ç›¸å…³å¼•ç”¨è·¯å¾„
4. **æƒé™ç®¡ç†** - ç¡®ä¿è„šæœ¬æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™ (`chmod +x`)
5. **ç¯å¢ƒé…ç½®** - ä¸åŒç¯å¢ƒä½¿ç”¨å¯¹åº”çš„é…ç½®æ–‡ä»¶

---

**ç›®å½•æ•´ç†å®Œæˆæ—¶é—´**: $(date)
**æ•´ç†è§„åˆ™**: æŒ‰åŠŸèƒ½åˆ†ç±»ï¼Œä¾¿äºç»´æŠ¤å’Œç®¡ç†
